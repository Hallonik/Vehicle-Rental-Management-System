package com.example.vehicle.rental.controller;


import com.example.vehicle.rental.dto.CredDTO;
import com.example.vehicle.rental.dto.UserDto;
import com.example.vehicle.rental.service.UserService;
import com.stripe.exception.StripeException;
import io.swagger.v3.oas.annotations.tags.Tag;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/api/admin")
@Tag(name = "AdminController", description = "Endpoints for Admin level operations")
public class AdminController {

    public UserService userService;

    public AdminController(UserService userService) {
        this.userService = userService;
    }

    @PostMapping("/Authenticate")
    public ResponseEntity<?> authenticate(@RequestBody CredDTO credDto) {
        return userService.authenticate(credDto);
    }

    @PostMapping(
    value = "/AddUser",
    consumes =  "application/json",
    produces =  "application/json"
    )
    public ResponseEntity<?> addUser(@RequestBody UserDto user) throws StripeException {

        return userService.addUser(user);

    }
}
